<main>   
    <aside>
    <div>
        <ul>
            <li>Dashboard</li>
            <li>My Profie</li>
            <li>Health Metrics</li>
            <li>Messages</li>
            <li (click)="logout()">Logout</li>
        </ul>
    </div>
</aside>
<aside>
    <section class="metric-section">
        <form [formGroup]="healthMetricsForm" (ngSubmit)="onSubmit()">
            <div>
                    <h1>{{userData?.username}}</h1>
            </div>
            <h1>Create / Update your Health Metrics</h1>
            <div>

                <mat-form-field appearance="fill">
                    <mat-label>Type</mat-label>
                    <mat-select formControlName="type">
                        <mat-option value="blood_sugar">Blood Sugar</mat-option>
                        <mat-option value="blood_pressure">Blood Pressure</mat-option>
                        <mat-option value="weight">Weight</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div>
                .
                <mat-form-field appearance="fill">
                    <mat-label>Value</mat-label>
                    <input matInput formControlName="value" maxlength="3" type="number" placeholder="Enter Value">
                </mat-form-field>
            </div>
          
            <button mat-raised-button color="primary" type="submit">Submit</button>
            </form>
    </section>

</aside>
<aside>
    <div class="dashboard-container">
        @for(metric of userMetrics; track metric){

            <mat-card>
                <mat-card-header>
                    <mat-card-title>Your {{metric.type}} Metrics</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    @if(metric.matchedDatas){
                            @for (item of metric.matchedDatas; track item) {
                                <p><strong>{{item.updatedAt | date:"MM/dd/yy"}}: </strong></p>
                                <input type="number" [value]="item.value" #temValue min=0 max=999 (input)="0"> 
                                <mat-icon (click)="updateValue(temValue.value, item._id)" fontIcon="edit"></mat-icon> 
                                 <mat-icon (click)="deleteValue(item._id)" fontIcon="delete"></mat-icon>
                            }
                    } @else{

                        <p>No data available. Please log your health metrics.</p>
                    }
                </mat-card-content>
                <mat-card-actions>
                    <button mat-raised-button color="warn">show Chart</button>
                </mat-card-actions>
            </mat-card>
        }
    
    </div>

</aside>
</main>