import{M as R,N as P,O as k,P as V,T as B,U as D,V as G,Y as O,Z as j,a as b,aa as U,b as c,ba as z,d as E,e as I,g as y,i as A,j as L,k as q,m as w,n as T,o as N}from"./chunk-H3LN7KS6.js";import{Bb as C,Db as H,Ga as o,Ha as i,Ia as p,La as f,Ma as M,Wa as n,Xa as g,Ya as h,ha as a,la as d,pa as F,qb as x,ua as s,ya as l}from"./chunk-MJYMIYMJ.js";function K(r,m){r&1&&(o(0,"mat-error"),n(1," Username is required "),i())}function Q(r,m){if(r&1&&(o(0,"mat-form-field")(1,"mat-label"),n(2,"Username"),i(),p(3,"input",8),s(4,K,2,0,"mat-error",2),i()),r&2){let e,t=M();a(4),l("ngIf",(e=t.authForm.get("username"))==null?null:e.hasError("required"))}}function W(r,m){r&1&&(o(0,"mat-error"),n(1," Email is required "),i())}function X(r,m){r&1&&(o(0,"mat-error"),n(1," Enter a valid email address "),i())}function Y(r,m){r&1&&(o(0,"mat-error"),n(1," Password is required "),i())}function Z(r,m){r&1&&(o(0,"mat-error"),n(1," Minimum 6 characters required "),i())}var J=class r{constructor(m,e,t){this.formBuilder=m;this.authService=e;this.router=t;this.authForm=this.formBuilder.group({username:[""],email:["",c.required],password:["",c.required]})}authForm;isLogin=!1;errorMessage="";onSubmit(){if(this.authForm.valid){console.log(this.authForm.value);let m=this.authForm.value;this.isLogin?this.authService.login({email:m.email,password:m.password}).subscribe({next:e=>{localStorage.setItem(this.authService.takeToken(),e.token),this.authService.isAuthenticatedSubject.next(!0),this.authService.decodeToken(e.token),this.router.navigate(["/dashboard"])},error:e=>this.errorMessage=e.console.message||"Login Failed"}):this.authService.register(m).subscribe({next:e=>{this.toggleMode(),console.log("Registration successful",e),this.authForm.reset()},error:e=>this.errorMessage=e.console.message||"Registration Failded"})}}toggleMode(){this.isLogin=!this.isLogin,this.isLogin?this.authForm.get("username")?.clearValidators():this.authForm.get("username")?.setValidators([c.required]),this.authForm.get("username")?.updateValueAndValidity()}static \u0275fac=function(e){return new(e||r)(d(w),d(H),d(C))};static \u0275cmp=F({type:r,selectors:[["app-auth"]],decls:23,vars:11,consts:[[1,"auth-card"],[3,"ngSubmit","formGroup"],[4,"ngIf"],["appearance","outline"],["type","text","matInput","","formControlName","email","required",""],["type","text","matInput","","formControlName","password","required",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"click"],["type","text","matInput","","formControlName","username","required",""]],template:function(e,t){if(e&1&&(o(0,"mat-card",0)(1,"mat-card-title"),n(2),i(),o(3,"form",1),f("ngSubmit",function(){return t.onSubmit()}),s(4,Q,5,1,"mat-form-field",2),o(5,"mat-form-field",3)(6,"mat-label"),n(7,"Email"),i(),p(8,"input",4),s(9,W,2,0,"mat-error",2)(10,X,2,0,"mat-error",2),i(),o(11,"mat-form-field",3)(12,"mat-label"),n(13,"Password"),i(),p(14,"input",5),s(15,Y,2,0,"mat-error",2)(16,Z,2,0,"mat-error",2),i(),o(17,"button",6),n(18),i()(),o(19,"p"),n(20),o(21,"a",7),f("click",function(){return t.toggleMode()}),n(22),i()()()),e&2){let u,_,v,S;a(2),g(t.isLogin?"Login":"Register"),a(),l("formGroup",t.authForm),a(),l("ngIf",!t.isLogin),a(5),l("ngIf",(u=t.authForm.get("email"))==null?null:u.hasError("required")),a(),l("ngIf",(_=t.authForm.get("email"))==null?null:_.hasError("email")),a(5),l("ngIf",(v=t.authForm.get("password"))==null?null:v.hasError("required")),a(),l("ngIf",(S=t.authForm.get("password"))==null?null:S.hasError("minlength")),a(),l("disabled",!t.authForm.valid),a(),h(" ",t.isLogin?"Login":"Register"," "),a(2),h(" ",t.isLogin?"Don't have an account?":"Already have an account?"," "),a(2),g(t.isLogin?"Register":"Login")}},dependencies:[B,k,V,x,T,y,b,E,I,q,N,A,L,j,O,D,G,z,U,P,R],styles:[".auth-card[_ngcontent-%COMP%]{width:400px;margin:50px auto;padding:20px;display:flex;flex-direction:column;align-items:center}form[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}button[_ngcontent-%COMP%]{margin-top:20px;width:100%}p[_ngcontent-%COMP%]{margin-top:10px}a[_ngcontent-%COMP%]{cursor:pointer;color:#1976d2}"]})};export{J as AuthComponent};
